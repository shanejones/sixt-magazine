<?php
$map_locations = [
    [
        'title' => 'Golden Gate Bridge',
        'location' => 'San Francisco, California, USA',
        'description' => '<p>The Golden Gate Bridge is more than just a stunning landmark. Built during the Great Depression, it provided thousands of jobs and was completed ahead of schedule in 1937. Its towers rise 746 feet into the sky, and the bridge\'s cables are so long they could wrap around the Earth three times. It connects San Francisco to Marin County and often appears through the city\'s famous fog. Today, more than 100,000 cars cross it every day.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/1-golden-gate-bridge.jpg'
    ],
    [
        'title' => 'London Bridge',
        'location' => 'London, United Kingdom',
        'description' => '<p>Often mistaken for its more decorative neighbor, Tower Bridge, London Bridge has its own unique story. The current bridge opened in 1973, replacing a 19th-century stone bridge famously sold to an American entrepreneur in the 1960s. He dismantled it, shipped it to Lake Havasu City, Arizona, and rebuilt it as a tourist attraction. Though more understated, modern London Bridge\'s location near Borough Market and the Shard makes it a key part of London\'s landscape with a global legacy.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/2-london-bridge.jpg'
    ],
    [
        'title' => 'Brooklyn Bridge',
        'location' => 'New York, New York, USA',
        'description' => '<p>The Brooklyn Bridge, opened in 1883, was the world\'s first steel-wire suspension bridge. Designed by John A. Roebling and completed by his son, it became a symbol of resilience and progress. Stretching over 1,500 feet across the East River, it was once the longest suspension bridge globally. Today, its wooden pedestrian walkway offers stunning views of the Manhattan skyline and remains one of New York City\'s most photographed landmarks.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/3-brooklyn-bridge.jpg'
    ],
    [
        'title' => 'Tower Bridge',
        'location' => 'London, United Kingdom',
        'description' => '<p>Tower Bridge is one of those landmarks that instantly makes you feel like you\'re in London. With its iconic twin towers and drawbridge design, it stands as a remarkable example of Victorian engineering. Completed in 1894, the bridge was built to allow river traffic to pass while also connecting the city\'s growing neighborhoods. Today, it\'s a popular spot for tourists, offering stunning views from its high-level walkways and a chance to explore the original steam-powered engines.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/4-tower-bridge.jpg'
    ],
    [
        'title' => 'Hangzhou Bay Bridge',
        'location' => 'Jiaxing, China',
        'description' => '<p>The Hangzhou Bay Bridge is a remarkable feat of engineering and one of the longest sea-crossing bridges in the world. Spanning over 22 miles across China\'s Hangzhou Bay, it connects the cities of Jiaxing and Ningbo, cutting travel time and making long-distance drives along the coast more efficient and scenic. With its sleek design and impressive scale, driving across the bridge offers a unique experience. Surrounded by open water and sky, it\'s a moment of calm and awe in the middle of a journey.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/5-hangzhou-bay-bridge.jpg'
    ],
    [
        'title' => 'Akashi Kaikyō Bridge',
        'location' => 'Kobe, Awaji Island, Awaji, Japan',
        'description' => '<p>The Akashi Kaikyō Bridge in Japan is a marvel of modern engineering and the world\'s longest suspension bridge central span. Connecting Kobe to Awaji Island, it stretches over 12,800 feet across the Akashi Strait. Driving across offers breathtaking views of the ocean and nearby islands, with its towering structure inspiring awe. Beyond its beauty, the bridge is a vital transportation link and a proud symbol of Japan\'s engineering excellence.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/6-akashi-kaikyo-bridge.jpg'
    ],
    [
        'title' => '1915 Çanakkale Bridge',
        'location' => 'Turkey',
        'description' => '<p>The 1915 Çanakkale Bridge in Turkey is the world\'s longest and highest mid-span suspension bridge. Spanning the Dardanelles Strait, it connects Europe and Asia, greatly reducing travel time. Driving across offers stunning views of the strait and surrounding landscapes, highlighting both natural beauty and impressive scale. As a vital part of Turkey\'s infrastructure, the bridge symbolizes innovation, progress, and the country\'s engineering achievements.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/7-1915-canakkale-bridge.jpg'
    ],
    [
        'title' => 'New River Gorge Bridge',
        'location' => 'Victor, West Virginia, USA',
        'description' => '<p>The New River Gorge Bridge is a true marvel of modern engineering, holding the title of one of the longest steel arch bridges in the world. Opened in 1977, it spans 3,030 feet across the New River Gorge, making it a key part of West Virginia\'s scenic landscape. The bridge is famous for its breathtaking views of the gorge, but it\'s also known for its thrilling annual "Bridge Day," when daredevils rappel off the structure and base jump into the gorge below.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/8-new-river-gorge-bridge.jpg'
    ],
    [
        'title' => 'Yavuz Sultan Selim Bridge',
        'location' => 'Istanbul, Turkey',
        'description' => '<p>The Yavuz Sultan Selim Bridge in Turkey, also known as the Third Bosphorus Bridge, is a striking addition to Istanbul\'s skyline. Spanning the northern part of the Bosphorus Strait, it connects the European and Asian sides of the city, offering a vital link for both traffic and trade. The bridge\'s sleek design and towering structure provide stunning views of the surrounding landscape, including the lush forests and waters below.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/9-yavu-sultan-selim-bridge.jpg'
    ],
    [
        'title' => 'Chesapeake Bay Bridge-Tunnel',
        'location' => 'Virginia Beach, Virginia, USA',
        'description' => '<p>The Chesapeake Bay Bridge-Tunnel is a 17.6-mile engineering marvel combining bridge and tunnel sections. Opened in 1964, it links Virginia Beach to the Eastern Shore and features two tunnels allowing ships to pass overhead. Known for stunning Chesapeake Bay views, it remains a vital transportation route. In 2007, it was named a National Civil Engineering Landmark, recognizing its significance as both a crucial link and an impressive feat of modern engineering.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/10-chesapeake-bay-bridge-tunnel.jpg'
    ],
    [
        'title' => 'Mike O\'Callaghan–Pat Tillman Memorial Bridge',
        'location' => 'Mohave County, Arizona, USA',
        'description' => '<p>The Mike O\'Callaghan–Pat Tillman Memorial Bridge spans the Colorado River between Arizona and Nevada, just downstream from the Hoover Dam. Opened in 2010, it\'s one of the highest bridges in the U.S. and features a pedestrian walkway with stunning views of the dam and river. Named after a former governor and a fallen soldier, the bridge is both a vital roadway and a powerful symbol of American resilience.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/11-mike-o-callaghan–pat-tillman-memorial-bridge.jpg'
    ],
    [
        'title' => 'Great Belt Bridge',
        'location' => 'Korsør, Denmark',
        'description' => '<p>The Great Belt Bridge in Denmark is a remarkable engineering achievement that connects the eastern and western parts of the country across the Great Belt strait. Opened in the late 1990s, the bridge system includes both a suspension and a box-girder bridge, along with an undersea tunnel. Once the longest suspension bridge outside Asia, it remains a vital link for road and rail travel, offering stunning views and a seamless connection across Denmark.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/12-great-belt-bridge.jpg'
    ],
    [
        'title' => 'Yi Sun-sin Bridge',
        'location' => 'Jeollanam-do, South Korea',
        'description' => '<p>The Yi Sun-sin Bridge in South Korea spans Yeosu Harbor, linking Gwangyang and Yeosu. Opened in 2012, it\'s one of the longest suspension bridges in the world and a symbol of Korean engineering. Named after Admiral Yi Sun-sin, it honors his legacy while serving as a key transport route. With sidewalks on both sides, visitors can walk across and enjoy sweeping views of the harbor and surrounding landscapes.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/13-yi-sun-si-bridge.jpg'
    ],
    [
        'title' => 'Mackinac Bridge',
        'location' => 'Mackinaw City, Michigan, USA',
        'description' => '<p>The Mackinac Bridge, linking Michigan\'s Upper and Lower Peninsulas, is a monumental suspension bridge stretching across the Straits of Mackinac. Since opening in 1957, it has served as a vital connector in the state\'s highway system. Nicknamed the "Mighty Mac," it offers sweeping views of Lake Michigan and Lake Huron and welcomes thousands each Labor Day for its celebrated annual bridge walk.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/14-mackinac-bridge.jpg'
    ],
    [
        'title' => 'Sydney Harbor Bridge',
        'location' => 'Sydney, Australia',
        'description' => '<p>The Sydney Harbour Bridge, one of Australia\'s most iconic landmarks, spans Sydney Harbour, connecting the city\'s central business district with the North Shore. Opened in 1932, this towering steel arch bridge supports vehicles, trains, cyclists, and pedestrians, making it a vital part of the city\'s infrastructure. Visitors can walk across the bridge for stunning views of the Sydney Opera House and harbor, or take part in the famous BridgeClimb for an unforgettable experience atop the arch.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/15-sydney-harbor-bridge.jpg'
    ],
    [
        'title' => 'Forest Hill Bridge',
        'location' => 'Auburn, California, USA',
        'description' => '<p>The Foresthill Bridge near Auburn, California, is the tallest in the state, soaring 730 feet above the North Fork American River. Opened in 1973, it was built for the planned Auburn Dam reservoir, which was never completed. Today, it connects Auburn and Foresthill, serving vehicles and pedestrians. Its walkways offer panoramic views of the river canyon, making it popular for sightseeing and photography. The bridge is also featured in films and is a notable cantilever design.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/16-forest-hill-bridge.jpg'
    ],
    [
        'title' => 'Hardanger Bridge',
        'location' => 'Vallavik, Norway',
        'description' => '<p>The Hardanger Bridge, spanning the beautiful Hardangerfjord in western Norway, is one of the longest suspension bridges in the world. Opened in 2013, it connects the regions of Ullensvang and Ulvik, providing a vital link for both locals and travelers exploring Norway\'s dramatic fjord landscape. With its elegant design and sweeping views of the surrounding mountains and water, the Hardanger Bridge offers a memorable experience whether you\'re driving across or walking along its pedestrian path.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/17-hardanger-bridge.jpg'
    ],
    [
        'title' => 'Bloukrans Bridge',
        'location' => 'Tsitsikamma, South Africa',
        'description' => '<p>The Bloukrans Bridge in South Africa spans the stunning Bloukrans River Gorge along the Garden Route in the Western Cape. Opened in 1984, it is one of the highest concrete arch bridges globally and famous for its thrilling bungee jumping, attracting adventurers worldwide. While mainly serving vehicles, visitors can visit viewing areas to enjoy sweeping views of the gorge, mountains, and lush forest below.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/18-bloukrans-bridge.jpg'
    ],
    [
        'title' => 'George Washington Bridge',
        'location' => 'New York, New York, USA',
        'description' => '<p>The George Washington Bridge spans the Hudson River, connecting New York City to New Jersey. Opened in 1931, it remains one of the busiest bridges in the world. With its twin-level design and striking towers, it offers dramatic views of the Manhattan skyline. Both vehicles and pedestrians can cross, making it a vital link in the region\'s transportation network.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/19-george-washington-bridge.jpg'
    ],
    [
        'title' => 'Glen Canyon Dam Bridge',
        'location' => 'Coconino County, Arizona, USA',
        'description' => '<p>The Glen Canyon Dam Bridge in Coconino County, Arizona, is a steel arch bridge that spans the Colorado River near the Glen Canyon Dam. Opened in 1959, it was constructed to facilitate the transport of materials for the dam\'s construction. The bridge carries U.S. Route 89 and features pedestrian walkways, allowing visitors to enjoy panoramic views of the canyon and the dam. Its impressive height and engineering make it a notable landmark in the region.</p>',
        'image' => plugin_dir_url( __FILE__ ) . 'map-images/20-glen-canyon-dam-bridge.jpg'
    ],
];

$map_svg_url = plugin_dir_url( __FILE__ ) . 'map-images/world-map.svg';

$map_markers = [
    ['top' => '49%', 'left' => '11%'], // Golden Gate Bridge - San Francisco, USA
    ['top' => '41%', 'left' => '45%'], // London Bridge - London, UK (same as Tower Bridge)
    ['top' => '45%', 'left' => '26%'], // Brooklyn Bridge - New York, USA
    ['top' => '41%', 'left' => '45%'], // Tower Bridge - London, UK
    ['top' => '48%', 'left' => '75%'], // Hangzhou Bay Bridge - China
    ['top' => '46%', 'left' => '80%'], // Akashi Kaikyō Bridge - Japan
    ['top' => '43%', 'left' => '55%'], // 1915 Çanakkale Bridge - Turkey
    ['top' => '47%', 'left' => '25%'], // New River Gorge Bridge - West Virginia, USA
    ['top' => '42%', 'left' => '55%'], // Yavuz Sultan Selim Bridge - Istanbul, Turkey
    ['top' => '48%', 'left' => '26%'], // Chesapeake Bay Bridge-Tunnel - Virginia, USA
    ['top' => '51%', 'left' => '16%'], // Mike O'Callaghan–Pat Tillman Memorial Bridge - Arizona, USA
    ['top' => '37%', 'left' => '48%'], // Great Belt Bridge - Denmark
    ['top' => '49%', 'left' => '79%'], // Yi Sun-sin Bridge - South Korea
    ['top' => '44%', 'left' => '22%'], // Mackinac Bridge - Michigan, USA
    ['top' => '83%', 'left' => '87%'], // Sydney Harbor Bridge - Australia
    ['top' => '49%', 'left' => '12%'], // Forest Hill Bridge - California, USA (near Golden Gate)
    ['top' => '33%', 'left' => '47%'], // Hardanger Bridge - Norway
    ['top' => '72%', 'left' => '52%'], // Bloukrans Bridge - South Africa
    ['top' => '45%', 'left' => '25%'], // George Washington Bridge - New York, USA (near Brooklyn Bridge)
    ['top' => '50%', 'left' => '17%'], // Glen Canyon Dam Bridge - Arizona, USA
];
?>

<div class="us-vfab-interactive-map-container"id="vfab-global-items">
    <h2>The most iconic bridge views Worldwide</h2>
    <div class="us-vfab-interactive-map-inner">
        <div class="us-vfab-interactive-map-content-wrapper">
            <div class="us-vfab-interactive-map-content">
                <?php foreach ( $map_locations as $index => $location ) : ?>
                    <div class="us-vfab-map-location-item <?php echo $index === 0 ? 'active' : ''; ?>" data-location-index="<?php echo $index; ?>">
                        <p class="us-vfab-map-location-item-number"><?php echo $index + 1; ?></p>
                        <img src="<?php echo esc_url( $location['image'] ); ?>" alt="<?php echo esc_attr( $location['title'] ); ?>">
                        <div class="us-vfab-map-location-item-content-container">
                            <h3><?php echo esc_html( $location['title'] ); ?></h3>
                            <p><?php echo esc_html( $location['location'] ); ?></p>
                            <?php echo $location['description']; ?>
                        </div>
                    </div>
                <?php endforeach; ?>
            </div>
            
            <div class="us-vfab-map-navigation">
                <button class="us-vfab-nav-button us-vfab-nav-prev" id="prevButton">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M7.5 9L4.5 6L7.5 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="us-vfab-nav-button us-vfab-nav-next" id="nextButton">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.5 9L7.5 6L4.5 3" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="us-vfab-interactive-map-image">
            <?php
            
                echo '<img class="main-map" src="' . esc_url( $map_svg_url ) . '" alt="' . esc_attr__( 'Interactive Map of France', 'ra7-helper-plugin' ) . '">' ;
            
            ?>
            
            <div class="us-vfab-map-markers">
                <?php foreach ( $map_markers as $index => $position ) : ?>
                    <button 
                        class="us-vfab-map-marker <?php echo $index === 0 ? 'active' : ''; ?>" 
                        data-index="<?php echo $index; ?>"
                        style="top: <?php echo $position['top']; ?>; left: <?php echo $position['left']; ?>;"
                    >
                        <svg class="us-vfab-marker-icon" height="25" viewBox="0 0 83.24 99.65" width="25" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><clipPath id="a"><path d="m0 0h83.24v99.65h-83.24z"/></clipPath><g clip-path="url(#a)" fill="currentColor"><path d="m25.026 78.873c-33.326-15.218-33.66-61.681.741-75.741 26.171-10.68 55.965 7.109 57.414 35.848.934 18.424-9.244 32.467-26.106 40.513a9.816 9.816 0 0 0 -3.189 3.174q-6.023 8.378-11.757 16.726a.584.584 0 0 1 -.795.168.547.547 0 0 1 -.156-.152c-3.366-4.824-11.193-18.265-16.153-20.534m41.793-37.785a25.223 25.223 0 1 0 -25.218 24.85 25.038 25.038 0 0 0 25.218-24.85"/><path d="m113 94.862a16.823 16.823 0 1 1 -17.07 16.821 16.947 16.947 0 0 1 17.07-16.821" transform="translate(-71.388 -70.593)"/></g></svg>
                        <?php echo $index + 1; ?>
                    </button>
                <?php endforeach; ?>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const markers = document.querySelectorAll('.us-vfab-map-marker');
    const contentItems = document.querySelectorAll('.us-vfab-map-location-item');
    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');
    let currentIndex = 0;
    const totalItems = contentItems.length;
    
    function updateActiveState(index) {
        // Update active marker
        markers.forEach(m => m.classList.remove('active'));
        if (markers[index]) markers[index].classList.add('active');
        
        // Update active content
        contentItems.forEach(item => item.classList.remove('active'));
        if (contentItems[index]) contentItems[index].classList.add('active');
        
        // Update button states
        prevButton.disabled = index === 0;
        nextButton.disabled = index === totalItems - 1;
        
        currentIndex = index;
    }
    
    // Initialize button states
    updateActiveState(0);
    
    // Handle marker clicks
    markers.forEach(marker => {
        marker.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            updateActiveState(index);
        });
    });
    
    // Handle prev button click
    prevButton.addEventListener('click', function() {
        if (currentIndex > 0) {
            updateActiveState(currentIndex - 1);
        }
    });
    
    // Handle next button click
    nextButton.addEventListener('click', function() {
        if (currentIndex < totalItems - 1) {
            updateActiveState(currentIndex + 1);
        }
    });
});
</script>